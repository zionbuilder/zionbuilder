!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ZBVideo=t():e.ZBVideo=t()}(window,(function(){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/",i(i.s=1)}([function(e,t){var i=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object"];function o(e,t){return"string"==typeof e&&(t=e,e=document),Array.prototype.slice.call(e.querySelectorAll(t))}function n(e){return"string"==typeof e?e.split(",").map(r).filter(s):function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e)?function(e){return[].concat.apply([],e)}(e.map(n).filter(s)):e||[]}function s(e){return e.length>0}function r(e){return e.replace(/^\s+|\s+$/g,"")}e.exports=function(e,t){var r;t=t||{},r=e=e||"body","[object Object]"===Object.prototype.toString.call(r)&&(t=e,e="body"),t.ignore=t.ignore||"",t.players=t.players||"";var a=o(e);if(s(a)){var u;if(!document.getElementById("fit-vids-style"))(document.head||document.getElementsByTagName("head")[0]).appendChild(((u=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',u.childNodes[1]));var d=n(t.players),l=n(t.ignore),c=l.length>0?l.join():null,p=i.concat(d).join();s(p)&&a.forEach((function(e){o(e,p).forEach((function(e){c&&e.matches(c)||function(e){if(/fluid-width-video-wrapper/.test(e.parentNode.className))return;var t=parseInt(e.getAttribute("width"),10),i=parseInt(e.getAttribute("height"),10),o=isNaN(t)?e.clientWidth:t,n=(isNaN(i)?e.clientHeight:i)/o;e.removeAttribute("width"),e.removeAttribute("height");var s=document.createElement("div");e.parentNode.insertBefore(s,e),s.className="fluid-width-video-wrapper",s.style.paddingTop=100*n+"%",s.appendChild(e)}(e)}))}))}}},function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return c}));class o{constructor(){this.callbacks={}}addEventListener(e,t){void 0===this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t)}removeEventListener(e,t){if(void 0!==this.callbacks[e]){const i=this.callbacks[e].indexOf(t);-1!==i&&this.callbacks[e].splice(i)}}dispatchEvent(e,t={}){void 0!==this.callbacks[e]&&this.callbacks[e].forEach(e=>{e({detail:t})})}}var n=i(0),s=i.n(n);let r=0,a=0,u=0,d=1;const l=new o;class c{constructor(e,t={}){this.options={autoplay:!0,muted:!0,loop:!0,controls:!0,controlsPosition:"bottom-left",videoSource:"local",responsive:!0,...t},this.eventBusInstance=new o,this.on=this.eventBusInstance.addEventListener.bind(this.eventBusInstance),this.off=this.eventBusInstance.removeEventListener.bind(this.eventBusInstance),this.trigger=this.eventBusInstance.dispatchEvent.bind(this.eventBusInstance),this.domNode=e,this.videoIndex=u++,this.videoContainer=null,this.options.responsive&&this.on("video_ready",()=>{s()()}),this.domNode.zionVideo=this,this.nextTick(()=>{"local"===this.options.videoSource&&this.options.mp4?(this.videoSource="local",this.setupLocal()):"youtube"===this.options.videoSource&&this.options.youtubeURL?(this.videoSource="youtube",this.YoutubeId=function(e){let t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!==t[7].length)&&t[7]}(this.options.youtubeURL),this.setupYoutube()):"vimeo"===this.options.videoSource&&this.options.vimeoURL&&(this.videoSource="vimeo",this.setupVimeo())})}nextTick(e){setTimeout(()=>{e()},0)}setupYoutube(){const e={mute:this.options.muted?1:0,autoplay:this.options.autoplay?1:0,iv_load_policy:3,showinfo:0,controls:this.options.controls?1:0,modestbranding:1,rel:0,wmode:"transparent"};let t="";for(let[i,o]of Object.entries(e))t+=`&${i}=${o}`;const i=document.createElement("iframe");if(i.src=`https://www.youtube-nocookie.com/embed/${this.YoutubeId}?enablejsapi=1${t}`,i.id="znpb-video-bg-youtube-"+this.videoIndex,i.allow="autoplay; fullscreen",i.width=425,i.height=239,this.domNode.appendChild(i),0===r){var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n);const e=this;window.onYouTubeIframeAPIReady=function(){e.enableYoutube(),l.dispatchEvent("youtube_api_ready"),r=2},r=1}else 1===r?l.addEventListener("youtube_api_ready",this.enableYoutube.bind(this)):2===r&&this.enableYoutube()}enableYoutube(){this.player=new window.YT.Player("znpb-video-bg-youtube-"+this.videoIndex,{height:"100%",width:"100%",videoId:this.YoutubeId}),this.videoContainer=this.player.getIframe(),this.trigger("video_ready")}setupVimeo(){const e=document.createElement("div");if(e.id="znpb-video-bg-vimeo-"+this.videoIndex,this.domNode.appendChild(e),0===a){const e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js";let t=document.getElementsByTagName("script")[1];const i=this;t.parentNode.insertBefore(e,t),e.onload=function(){i.enableVimeo(),l.dispatchEvent("vimeo_api_ready"),a=2},a=1}else 1===a?l.addEventListener("vimeo_api_ready",this.enableVimeo.bind(this)):2===a&&this.enableVimeo()}enableVimeo(){this.player=new window.Vimeo.Player("znpb-video-bg-vimeo-"+this.videoIndex,{id:this.options.vimeoURL,background:!0,muted:this.options.muted,transparent:!0,autoplay:this.options.autoplay}),this.videoContainer=this.player.element,this.trigger("video_ready")}setupLocal(){let e=this.options.autoplay?"autoplay":"",t=this.options.muted?"muted":"",i=this.options.loop?"loop":"",o=document.createElement("video");if(o.muted=t,o.autoplay=e,o.loop=i,this.options.controls&&(o.controls=!0),this.options.mp4){var n=document.createElement("source");n.src=this.options.mp4,o.appendChild(n)}this.domNode.appendChild(o),this.player=o,this.videoContainer=o,this.trigger("video_ready")}getVideoContainer(){return this.videoContainer}play(){"youtube"===this.videoSource&&this.player.playVideo(),"vimeo"===this.videoSource&&this.player.play(),"local"===this.videoSource&&this.player.play(),this.playing=!0}pause(){"youtube"===this.videoSource&&this.player.pauseVideo(),"vimeo"===this.videoSource&&this.player.pause(),"local"===this.videoSource&&this.player.pause(),this.playing=!1}togglePlay(){this.playing?this.pause():this.play()}mute(){"youtube"===this.videoSource&&this.player.mute(),"vimeo"===this.videoSource&&(this.player.getVolume().then(e=>{d=e}),this.player.setVolume(0)),"local"===this.videoSource&&(this.player.muted=!0),this.muted=!0}unMute(){"youtube"===this.videoSource&&this.player.unMute(),"vimeo"===this.videoSource&&this.player.setVolume(d),"local"===this.videoSource&&(this.player.muted=!1),this.muted=!1}toggleMute(){this.muted?this.unMute():this.mute()}destroy(){for(this.trigger("beforeDestroy"),this.player=null;this.domNode.firstChild;)this.domNode.removeChild(this.domNode.firstChild)}}}]).default}));